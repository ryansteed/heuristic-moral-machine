

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hmm.labeling.models module &mdash; heuristic-moral-machine 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="hmm.labeling.moralmachine module" href="hmm.labeling.moralmachine.html" />
    <link rel="prev" title="hmm.labeling.kidney_exchange module" href="hmm.labeling.kidney_exchange.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> heuristic-moral-machine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Heuristic Moral Machine Project</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hmm</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hmm.html">hmm package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hmm.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="hmm.labeling.html">hmm.labeling namespace</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hmm.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="hmm.html#module-hmm">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">heuristic-moral-machine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">hmm</a> &raquo;</li>
        
          <li><a href="hmm.html">hmm package</a> &raquo;</li>
        
          <li><a href="hmm.labeling.html">hmm.labeling namespace</a> &raquo;</li>
        
      <li>hmm.labeling.models module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/hmm.labeling.models.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-hmm.labeling.models">
<span id="hmm-labeling-models-module"></span><h1>hmm.labeling.models module<a class="headerlink" href="#module-hmm.labeling.models" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="hmm.labeling.models.Labeler">
<em class="property">class </em><code class="sig-prename descclassname">hmm.labeling.models.</code><code class="sig-name descname">Labeler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lfs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">model</span><span class="o">=</span><span class="default_value">LabelModel()</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for Snorkel label model.</p>
<ul class="simple">
<li><p>addition/change of labeling functions</p></li>
<li><p>label aggregation</p></li>
<li><p>model fitting</p></li>
<li><p>model evaluation: scoring and bucket analysis</p></li>
<li><p>filtering NAs</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lfs</strong> – list of labeling functions (heuristic functions)</p></li>
<li><p><strong>model</strong> – the model to use - by default, Snorkel’s generative label model</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="hmm.labeling.models.Labeler.add_lfs">
<code class="sig-name descname">add_lfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lfs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.add_lfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.add_lfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add labeling functions to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lfs</strong> – list of labeling functions to add</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.filter_probs">
<code class="sig-name descname">filter_probs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">L</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.filter_probs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.filter_probs" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter unlabeled rows (where all the labeling functions abstain) from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> – the dataset</p></li>
<li><p><strong>L</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the dataset and <cite>l</cite> is the number of labeling functions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the dataset with any unlabeled tuples removed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">L_train</span></em>, <em class="sig-param"><span class="n">Y_dev</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fit_params</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the generative label model on a set of labels. No ground-truth labels are required for fitting, but can be
included to help make the automatically generated label distribution match the ground-truth label distribution.
Fitting involves only the candidate label distributions in the training set <cite>L_train</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>L_train</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the training dataset and <cite>l</cite> is the number of labeling functions</p></li>
<li><p><strong>Y_dev</strong> – a held-out set of ground-truth labels</p></li>
<li><p><strong>fit_params</strong> – optional set of parameters for fitting - see Snorkel docs for all options</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the fitted label model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.get_confusion_matrix">
<code class="sig-name descname">get_confusion_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">L_dev</span></em>, <em class="sig-param"><span class="n">y_dev</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.get_confusion_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.get_confusion_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the confusion matrix for the final labels for a held out development set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>L_dev</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the dev dataset and <cite>l</cite> is the number of labeling functions</p></li>
<li><p><strong>y_dev</strong> – ground truth labels for the dev set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the confusion matrix as a pandas crosstab</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.get_label_buckets">
<code class="sig-name descname">get_label_buckets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">L_dev</span></em>, <em class="sig-param"><span class="n">y_dev</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.get_label_buckets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.get_label_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a bucket of labels (i.a. false positives, false negatives)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>L_dev</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the dev dataset and <cite>l</cite> is the number of labeling functions</p></li>
<li><p><strong>y_dev</strong> – ground truth labels for the dev set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a set of bucket labels - see the Moral Machine example for some analyses with label buckets</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.get_preds">
<code class="sig-name descname">get_preds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">L</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="o">=</span><span class="default_value">0.5</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.get_preds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.get_preds" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce rounded labels from a set of candidate labels produced for some dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>L</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the dataset and <cite>l</cite> is the number of labeling functions</p></li>
<li><p><strong>threshold</strong> – threshold for rounding posterior probabilities to discrete labels</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the rounded labels</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.label">
<code class="sig-name descname">label</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.label" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate candidate labels into a single label for each tuple in the dataframes in <cite>data</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – a set of dataframes, each containing a set of tuples to label</p></li>
<li><p><strong>verbose</strong> – whether or not to periodically print label status</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a set of labels for each dataframe in <cite>data</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.probs_to_preds">
<em class="property">static </em><code class="sig-name descname">probs_to_preds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">probs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.probs_to_preds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.probs_to_preds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.score">
<em class="property">static </em><code class="sig-name descname">score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">L_valid</span></em>, <em class="sig-param"><span class="n">y_val</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.score"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.score" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the label model on a held out test set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – a label aggregation model</p></li>
<li><p><strong>L_valid</strong> – an <cite>n</cite> x <cite>l</cite> matrix of candidate labels, where <cite>n</cite> is the size of the held-out validation set and <cite>l</cite> is the number of labeling functions</p></li>
<li><p><strong>y_val</strong> – ground-truth labels for the held-out validation set</p></li>
<li><p><strong>verbose</strong> – whether or not to periodically print label status</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.set_lfs">
<code class="sig-name descname">set_lfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lfs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.set_lfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.set_lfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the list of labeling functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lfs</strong> – labeling functions for the model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hmm.labeling.models.Labeler.update_applier">
<code class="sig-name descname">update_applier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hmm/labeling/models.html#Labeler.update_applier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hmm.labeling.models.Labeler.update_applier" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the labeling function applier with the labeling functions. The applier is responsible for generating
candidate labels for each tuple in the dataset, one set of candidate labels for each labeling function.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hmm.labeling.moralmachine.html" class="btn btn-neutral float-right" title="hmm.labeling.moralmachine module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hmm.labeling.kidney_exchange.html" class="btn btn-neutral float-left" title="hmm.labeling.kidney_exchange module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ryan Steed

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>